#:import NoTransition kivy.uix.screenmanager.NoTransition
ScreenManager:
    transition: NoTransition()
    HomeScreen:
        id: home
    SettingsScreen:
    ShareScreen:
    MoreScreen:
    PlayScreen:
        id: play
    LevelScreen:

<HomeScreen>:
    name: "Home"
    id: home
    Image:
        source: "../Art/HOMESCR.png"
    FloatLayout:
        Button:
            pos_hint: {"x": 0.27, "y": 0.52}
            size: 247, 111
            size_hint: None, None
            background_normal: "../Art/CLASSIC.png"
            background_down: "../Art/CLASSIC_DOWN.png"
            on_release:
                home.btn_press_audio()
                app.root.current = "Level"
                app.DIFFICULTY = "Classic"
    FloatLayout:
        Button:
            pos_hint: {"x": 0.27, "y": 0.4}
            size: 247, 111
            size_hint: None, None
            background_normal: "../Art/CHALLENGE.png"
            background_down: "../Art/CHALLENGE_DOWN.png"
            on_release:
                home.btn_press_audio()
                app.root.current = "Level"
                app.DIFFICULTY = "Challenge"
    FloatLayout:
        Button:
            pos_hint: {"x": 0.27, "y": 0.28}
            size: 247, 111
            size_hint: None, None
            background_normal: "../Art/EXPERT.png"
            background_down: "../Art/EXPERT_DOWN.png"
            on_release:
                home.btn_press_audio()
                app.root.current = "Level"
                app.DIFFICULTY = "Expert"
    AnchorLayout:
        anchor_x: "left"
        anchor_y: "bottom"
        padding: 44, 12
        Button:
            background_normal: "../Art/SETTINGS.png"
            background_down: "../Art/SETTINGS_DOWN.png"
            size: 130, 87.3
            size_hint: None, None
            on_release:
                home.btn_press_audio()
                app.root.current = "Settings"
    AnchorLayout:
        anchor_x: "center"
        anchor_y: "bottom"
        padding: 0, 12
        Button:
            background_normal: "../Art/SHARE.png"
            background_down: "../Art/SHARE_DOWN.png"
            size: 130, 87.3
            size_hint: None, None
            on_release:
                home.btn_press_audio()
                app.root.current = "Share"
    AnchorLayout:
        anchor_x: "right"
        anchor_y: "bottom"
        padding: 40, 12
        Button:
            background_normal: "../Art/MORE.png"
            background_down: "../Art/MORE_DOWN.png"
            size: 130, 87.3
            size_hint: None, None
            on_release:
                home.btn_press_audio()
                app.root.current = "More"

<SettingsScreen>:
    name: "Settings"
    id: settings
    Image:
        source: "../Art/SETTINGSSCR.png"
    AnchorLayout:
        anchor_x: "left"
        anchor_y: "top"
        padding: 90, 290
        Button:
            background_normal: "../Art/SOUND.png"
            background_down: "../Art/SOUND_DOWN.png"
            size: 175, 117.5
            size_hint: None, None
            on_release:
                settings.enable_or_disable_audio()
    AnchorLayout:
        anchor_x: "right"
        anchor_y: "top"
        padding: 90, 290
        Button:
            background_normal: "../Art/MUSIC.png"
            background_down: "../Art/MUSIC_DOWN.png"
            size: 175, 117.5
            size_hint: None, None
            on_release:
                settings.enable_or_disable_music()
    AnchorLayout:
        anchor_x: "left"
        anchor_y: "center"
        padding: 90, 0
        Button:
            background_normal: "../Art/SECURITY.png"
            background_down: "../Art/SECURITY_DOWN.png"
            size: 175, 117.5
            size_hint: None, None
            on_release: root.open_empty()
    AnchorLayout:
        anchor_x: "right"
        anchor_y: "center"
        padding: 90, 0
        Button:
            background_normal: "../Art/ADS.png"
            background_down: "../Art/ADS_DOWN.png"
            size: 175, 117.5
            size_hint: None, None
            on_release: root.open_empty()
    AnchorLayout:
        anchor_x: "center"
        anchor_y: "bottom"
        padding: 0, 300
        Button:
            background_normal: "../Art/HOME.png"
            background_down: "../Art/HOME_DOWN.png"
            size: 150, 100.7
            size_hint: None, None
            on_release: 
                app.root.current = "Home"
                app.root.ids.play.clear_game()
                

<ShareScreen>:
    name: "Share"
    Image:
        source: "../Art/SHARESCR.png"
    AnchorLayout:
        anchor_x: "left"
        anchor_y: "top"
        padding: 90, 290
        Button:
            background_normal: "../Art/IG.png"
            background_down: "../Art/IG_DOWN.png"
            size: 175, 117.5
            size_hint: None, None
            on_release: root.open_instagram()
    AnchorLayout:
        anchor_x: "right"
        anchor_y: "top"
        padding: 90, 290
        Button:
            background_normal: "../Art/TWT.png"
            background_down: "../Art/TWT_DOWN.png"
            size: 175, 117.5
            size_hint: None, None
            on_release: root.open_twitter()
    AnchorLayout:
        anchor_x: "left"
        anchor_y: "center"
        padding: 90, 0
        Button:
            background_normal: "../Art/FB.png"
            background_down: "../Art/FB_DOWN.png"
            size: 175, 117.5
            size_hint: None, None
            on_release: root.open_facebook()
    AnchorLayout:
        anchor_x: "right"
        anchor_y: "center"
        padding: 90, 0
        Button:
            background_normal: "../Art/Link.png"
            background_down: "../Art/LINK_DOWN.png"
            size: 175.2, 117.6
            size_hint: None, None
            on_release: root.open_link()
    AnchorLayout:
        anchor_x: "center"
        anchor_y: "bottom"
        padding: 0, 300
        Button:
            background_normal: "../Art/HOME.png"
            background_down: "../Art/HOME_DOWN.png"
            size: 150, 100.7
            size_hint: None, None
            on_release: 
                app.root.current = "Home"
                app.root.ids.play.clear_game()

<MoreScreen>:
    name: "More"
    Image:
        source: "../Art/MORESCR.png"
    AnchorLayout:
        anchor_x: "center"
        anchor_y: "top"
        padding: 0, 290
        Button:
            background_normal: "../Art/RATE.png"
            background_down: "../Art/RATE_DOWN.png"
            size: 175, 117.5
            size_hint: None, None
            on_release: root.open_rate()
    AnchorLayout:
        anchor_x: "center"
        anchor_y: "center"
        Button:
            background_normal: "../Art/CONTACT.png"
            background_down: "../Art/CONTACT_DOWN.png"
            size: 175, 117.5
            size_hint: None, None
            on_release: root.open_mail()
    AnchorLayout:
        anchor_x: "center"
        anchor_y: "bottom"
        padding: 0, 290
        Button:
            background_normal: "../Art/ABOUT.png"
            background_down: "../Art/ABOUT_DOWN.png"
            size: 175, 117.5
            size_hint: None, None
            on_release: root.open_info()
    AnchorLayout:
        anchor_x: "center"
        anchor_y: "bottom"
        padding: 0, 180
        Button:
            background_normal: "../Art/HOME.png"
            background_down: "../Art/HOME_DOWN.png"
            size: 140, 94
            size_hint: None, None
            on_release: 
                app.root.current = "Home"
                app.root.ids.play.clear_game()

<Pause>
    id: pop
    name: "Pause"
   # opacity: 0
    size: 450, 450
    size_hint: None, None
    auto_dismiss: False
    background_color: 0,0,0,0
    Image:
        source: "../Art/PAUSESCR.png"

    AnchorLayout:
        anchor_x: "left"
        anchor_y: "top"
        padding: 70, 108
        Button:
            background_normal: "../Art/HOME.png"
            background_down: "../Art/HOME_DOWN.png"
            size: 150, 100.7
            size_hint: None, None
            on_release:
                app.root.ids.home.btn_press_audio()
                app.root.current = "Home"
                app.root.ids.play.clear_game()
                pop.dismiss()
    AnchorLayout:
        anchor_x: "right"
        anchor_y: "top"
        padding: 70, 108
        Button:
            background_normal: "../Art/SETTINGS.png"
            background_down: "../Art/SETTINGS_DOWN.png"
            size: 150, 100.7
            size_hint: None, None
            on_release:
                app.root.ids.home.btn_press_audio()
                app.root.current = "Settings"
                app.root.ids.play.clear_game()
                pop.dismiss()
    AnchorLayout:
        anchor_x: "left"
        anchor_y: "bottom"
        padding: 70, 133
        Button:
            background_normal: "../Art/RESET.png"
            background_down: "../Art/RESET_DOWN.png"
            size: 150, 100.7
            size_hint: None, None
            on_release:
                app.root.ids.home.btn_press_audio()
                app.root.current = "Play"
                app.root.ids.play.reset_board()
                app.root.ids.play.start_timer()
                # this clears only the player's actions, not the answer key
                pop.dismiss()
    AnchorLayout:
        anchor_x: "right"
        anchor_y: "bottom"
        padding: 70, 133
        Button:
            background_normal: "../Art/MENU.png"
            background_down: "../Art/MENU_DOWN.png"
            size: 150, 100.7
            size_hint: None, None
            #on_release: app.root.current = "Level"
            on_release:
                app.root.ids.home.btn_press_audio()
                app.root.current = "Level"
                app.root.ids.play.clear_game()
                pop.dismiss()
    AnchorLayout:
        anchor_x: "center"
        anchor_y: "bottom"
        padding: 0, 15
        Button:
            background_normal: "../Art/RESUME.png"
            background_down: "../Art/RESUME_DOWN.png"
            size: 247, 111
            size_hint: None, None
            on_release:
                app.root.ids.home.btn_press_audio() 
                app.root.ids.play.start_timer()
                pop.dismiss()

<Rate>
    id: rate
    name: "Rate"
    size: 450, 450
    size_hint: None, None
    auto_dismiss: False
    background_color: 0,0,0,0
    Image:
        source: "../Art/POPUP.png"
    AnchorLayout:
        anchor_x: "right"
        anchor_y: "top"
        padding: 20, 25
        Button:
            #pos: 0, 540
            size: 50, 50
            size_hint: None, None
            background_color: 0,0,0,0
            text: "X"
            on_release:
                rate.clean()


<PlayScreen>:
    name: "Play"
    Image:
        source: "../Art/PLAYSCR.png"

    AnchorLayout:
        anchor_x: "left"
        anchor_y: "top"
        padding: 10, 60
        Button:
            background_normal: "../Art/PAUSE.png"
            background_down: "../Art/PAUSE_DOWN.png"
            #pos: 0, 540
            size: 100, 67.1
            size_hint: None, None
            on_release:
                app.root.ids.home.btn_press_audio()
                root.open_pause()

    BoxLayout:
        orientation: 'vertical'
        Label:
            text: ""
        Label:
            text: ""
        Label:
            text: ""
        Label:
            text: ""
        Label:
            id: extra_settings
            text: ''
            size_hint_x: None
            size: self.texture_size
            pos_hint: {'right': 1}
        Label:
            id: Instructions
            text: "Hint: Click a tile and see it and the surrounding tiles change colors!\nTry to match the picture at the top to win, good luck!"
            font_name: "../Art/Montserrat-Light.otf"
            halign: "center"
        Label:
            id: moves
            font_name: "../Art/Montserrat-Light.otf"
            valign: "bottom"


<GameLose>:
    id: pop
    name: "GameLose"
    size: 450, 450
    size_hint: None, None
    auto_dismiss: False
    background_color: 0,0,0,0
    Image:
        source: "../Art/LOSE.png"
    AnchorLayout:
        anchor_x: "center"
        anchor_y: "top"
        padding: 0, 115
        Button:
            background_normal: "../Art/HOME.png"
            background_down: "../Art/HOME_DOWN.png"
            size: 219, 147
            size_hint: None, None
            on_release:
                app.root.ids.home.btn_press_audio()
                app.root.ids.play.clear_game()
                app.root.current = "Home"
                pop.dismiss()
    AnchorLayout:
        anchor_x: "center"
        anchor_y: "bottom"
        padding: 0, 25
        Button:
            background_normal: "../Art/RESET.png"
            background_down: "../Art/RESET_DOWN.png"
            size: 219, 147
            size_hint: None, None
            on_release:
                app.root.ids.home.btn_press_audio()
                app.root.current = "Play"
                app.root.ids.play.clear_game()
                app.root.ids.play.on_enter()
                pop.dismiss()

<GameWin>:
    id: gamewin
    name: "GameWin"
    size: 450, 450
    size_hint: None, None
    auto_dismiss: False
    background_color: 0,0,0,0
    Image:
        source: "../Art/WIN.png"
    AnchorLayout:
        anchor_x: "left"
        anchor_y: "bottom"
        padding: 60, 25
        Button:
            background_normal: "../Art/HOME.png"
            background_down: "../Art/HOME_DOWN.png"
            size: 150, 100.65
            size_hint: None, None
            on_release:
                app.root.ids.home.btn_press_audio()
                app.root.ids.play.clear_game()
                app.root.current = "Home"
                gamewin.dismiss()
    AnchorLayout:
        anchor_x: "right"
        anchor_y: "bottom"
        padding: 50, 25
        Button:
            background_normal: "../Art/RESET.png"
            background_down: "../Art/RESET_DOWN.png"
            size: 150, 100.65
            size_hint: None, None
            on_release:
                app.root.ids.home.btn_press_audio()
                gamewin.dismiss()
                app.root.current = "Play"
                app.root.ids.play.clear_game()
                app.root.ids.play.on_enter()

<ExpertAnswer>
    id: expertanswer
    name: "ExpertAnswer"
    size: 450, 450
    size_hint: None, None
    auto_dismiss: False
    background_color: 0,0,0,0
    Image:
        source: "../Art/ANSWERSCR.png"
    AnchorLayout:
        anchor_x: "right"
        anchor_y: "top"
        padding: 20, 25
        Button:
            #pos: 0, 540
            size: 50, 50
            size_hint: None, None
            background_color: 0,0,0,0
            text: "X"
            on_release:
                expertanswer.clean()



# could do dark tiles for levels not yet (or some color coding)
<LevelScreen>:
    name: "Level"
    id: level
    # need to add graphics for levels screen
    Image:
        source: "../Art/LVLSCR.png"
    FloatLayout:
        Button:
            background_normal: "../Art/TILE.png"
            background_down: "../Art/TILE_DOWN.png"
            text: "1"
            pos_hint: {"x": 0.1, "y": 0.7}
            size: 130, 130
            size_hint: None, None
            on_release:
                app.STARTLEVEL = 1
                app.root.current = "Play"
    FloatLayout:
        Button:
            background_normal: "../Art/TILE.png"
            background_down: "../Art/TILE_DOWN.png"
            text: "2"
            pos_hint: {"x": 0.4, "y": 0.7}
            size: 130, 130
            size_hint: None, None
            on_release:
                app.STARTLEVEL = 2
                app.root.current = "Play"
    FloatLayout:
        Button:
            background_normal: "../Art/TILE.png"
            background_down: "../Art/TILE_DOWN.png"
            text: "3"
            pos_hint: {"x": 0.7, "y": 0.7}
            size: 130, 130
            size_hint: None, None
            on_release:
                app.STARTLEVEL = 3
                app.root.current = "Play"
    FloatLayout:
        Button:
            background_normal: "../Art/TILE_DOWN.png"
            background_down: "../Art/TILE_DOWN.png"
            text: "4"
            pos_hint: {"x": 0.1, "y": 0.5}
            size: 130, 130
            size_hint: None, None
            on_release:
                app.STARTLEVEL = 4
                app.root.current = "Play"
    FloatLayout:
        Button:
            background_normal: "../Art/TILE_DOWN.png"
            background_down: "../Art/TILE_DOWN.png"
            text: "5"
            pos_hint: {"x": 0.4, "y": 0.5}
            size: 130, 130
            size_hint: None, None
            on_release:
                app.STARTLEVEL = 5
                app.root.current = "Play"
    FloatLayout:
        Button:
            background_normal: "../Art/TILE_DOWN.png"
            background_down: "../Art/TILE_DOWN.png"
            text: "6"
            pos_hint: {"x": 0.7, "y": 0.5}
            size: 130, 130
            size_hint: None, None
            on_release:
                app.STARTLEVEL = 6
                app.root.current = "Play"
    FloatLayout:
        Button:
            background_normal: "../Art/TILE.png"
            background_down: "../Art/TILE_DOWN.png"
            text: "7"
            pos_hint: {"x": 0.1, "y": 0.3}
            size: 130, 130
            size_hint: None, None
            on_release:
                app.STARTLEVEL = 7
                app.root.current = "Play"
    FloatLayout:
        Button:
            background_normal: "../Art/TILE.png"
            background_down: "../Art/TILE_DOWN.png"
            text: "8"
            pos_hint: {"x": 0.4, "y": 0.3}
            size: 130, 130
            size_hint: None, None
            on_release:
                app.STARTLEVEL = 8
                app.root.current = "Play"
    FloatLayout:
        Button:
            background_normal: "../Art/TILE.png"
            background_down: "../Art/TILE_DOWN.png"
            text: "9"
            pos_hint: {"x": 0.7, "y": 0.3}
            size: 130, 130
            size_hint: None, None
            on_release:
                app.STARTLEVEL = 9
                app.root.current = "Play"


<NoFunctionality>
    id: nofunctionality
    name: "NoFunctionality"
    size: 450, 450
    size_hint: None, None
    auto_dismiss: False
    background_color: 0,0,0,0
    Image:
        source: "../Art/POPUP.png"
    Label:
        text: "There is currently no functionality here."
    AnchorLayout:
        anchor_x: "right"
        anchor_y: "top"
        padding: 20, 25
        Button:
            #pos: 0, 540
            size: 50, 50
            size_hint: None, None
            background_color: 0,0,0,0
            text: "X"
            on_release:
                nofunctionality.dismiss()
